<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CookItUp! Home Page</title>
</head>

<body>
    <script src="header.js"></script>
    <nav>
        <article id = "article">
        </article>
    </nav>
    <script>
        fetch('/recipe/all').then( response => {
            const jsonPromise = response.json();
            jsonPromise.then( json => {
                let article = document.getElementById("article");
                for (let i = 0; i < json.length; i++) {
                    let selection = document.createElement("selection");

                    //create the title
                    let link = document.createElement("a");
                    link.href = "/recipe/" + json[i].id + "/view.html";
                    let title = document.createElement("h2");
                    title.textContent = json[i].name;
                    link.appendChild(title);
                    selection.appendChild(link);

                    //create the title for the ingredients
                    let ingredientsTitle = document.createElement("h3");
                    ingredientsTitle.textContent = "Ingredients";
                    selection.appendChild(ingredientsTitle);
                    //create the list for the ingredients
                    let ingredientsList = document.createElement("ul");
                    let ingredients = json[i]["ingredients"];
                    for(let i = 0; i < ingredients.length; i++) {
                        let li = document.createElement("li");
                        li.textContent = ingredients[i].name;
                        ingredientsList.appendChild(li);
                    }
                    selection.appendChild(ingredientsList);

                    //create the title for the steps
                    let stepsTitle = document.createElement("h3");
                    stepsTitle.textContent = "Steps";
                    selection.appendChild(stepsTitle);
                    //create the list for the steps
                    let stepsList = document.createElement("ol");
                    let steps = json[i]["steps"];
                    for(let i = 0; i < steps.length; i++) {
                        let li = document.createElement("li");
                        li.textContent = steps[i].title;
                        stepsList.appendChild(li);
                    }
                    selection.appendChild(stepsList);

                    article.appendChild(selection);
                    article.appendChild(document.createElement("hr"));
                }
            });
        });
    </script>
    <script src="footer.js"></script>
</body>
</html>